<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Recipe App</title>
  <style>
    *{
      margin: 0px;
      padding: 0px;

    }
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    .app-container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    }
    h1 { text-align: center; }
    form {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    form input, form button {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .recipe-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }
    #search{
      margin-bottom: 1em;
    }
    .recipe-card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: relative;
    }
    .recipe-card.favorite {
      border: 2px solid #ff9800;
      background: #fff3e0;
    }
    button { 
      cursor: pointer; 
    }
    .card-buttons {
      margin-top: 10px;
      display: flex;
      gap: 5px;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <h1> Recipe App</h1>
    <h2 id="favoriteCalories">Total Favorite Calories: 0</h2>

    <form id="recipeForm">
      <input type="text" id="name" placeholder="Recipe Name" required>
      <input type="text" id="ingredients" placeholder="Ingredients (comma separated)" required>
      <input type="number" id="calories" placeholder="Calories" required>
      <button type="submit">Add Recipe</button>
    </form>

   
    <div id="search">
      <input type="text" id="search" placeholder="Search by name or ingredient">
    </div>
    <div id="recipeList" class="recipe-list"></div>
  </div>

  <script>
    let recipeForm = document.getElementById("recipeForm");
    let recipeList = document.getElementById("recipeList");
    let searchInput = document.getElementById("search");
    let favoriteCaloriesDisplay = document.getElementById("favoriteCalories");

    let recipes = JSON.parse(localStorage.getItem("recipes")) || [] ;

    function saveRecipes() {
      localStorage.setItem("recipes", JSON.stringify(recipes));
    }

    function updateFavoriteCalories() {
      let total = recipes.filter(r => r.favorite);
      let final =  total.reduce((sum, r) => sum + r.calories, 0);
      favoriteCaloriesDisplay.textContent = `Total Favorite Calories: ${final}`;
    }

    function renderRecipes(filter = "") {
      recipeList.innerHTML = "";
      let filtered = recipes.filter(recipe =>
        recipe.name.toLowerCase().includes(filter.toLowerCase()) ||
        recipe.ingredients.join(", ").toLowerCase().includes(filter.toLowerCase())
      );

      filtered.forEach((recipe, index) => {
        const card = document.createElement("div");
        card.className = "recipe-card";
        if (recipe.favorite) card.classList.add("favorite");

        card.innerHTML = `
          <h3>${recipe.name}</h3>
          <p><strong>Ingredients:</strong> ${recipe.ingredients.join(", ")}</p>
          <p><strong>Calories:</strong> ${recipe.calories}</p>
          <div class="card-buttons">
            <button onclick="toggleFavorite(${index})">&#9829;</button>
            <button onclick="editRecipe(${index})">Edit</button>
            <button onclick="deleteRecipe(${index})">delete</button>
          </div>
        `;
        recipeList.appendChild(card);
      });

      updateFavoriteCalories();
    }

    recipeForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const ingredients = document.getElementById("ingredients").value.split(",");
      const calories = parseInt(document.getElementById("calories").value);

      recipes.push({ name, ingredients, calories, favorite: false });
      saveRecipes();
      renderRecipes();
      recipeForm.reset();
    });

    function toggleFavorite(index) {
      recipes[index].favorite = !recipes[index].favorite;
      saveRecipes();
      renderRecipes(searchInput.value);
    }

    function deleteRecipe(index) {
      recipes.splice(index, 1);
      saveRecipes();
      renderRecipes(searchInput.value);
    }

    function editRecipe(index) {
      const recipe = recipes[index];
      document.getElementById("name").value = recipe.name;
      document.getElementById("ingredients").value = recipe.ingredients.join(", ");
      document.getElementById("calories").value = recipe.calories;
      deleteRecipe(index);
    }

    searchInput.addEventListener("input", (e) => {
      renderRecipes(e.target.value);
    });

    if (recipes.length === 0) {
      recipes = [
        { name: "WaterBalls", ingredients: [ "puri", "potato Filling", "mint Water"], calories: 400, favorite: false },
        { name: "Salad", ingredients: ["lettuce", "tomato", "cucumber"], calories: 150, favorite: true },
        { name: "Sandwich", ingredients: ["bread", "cheese", "tikki"], calories: 300, favorite: false },
        { name: "Samosa", ingredients: ["Maida sheet", "Potato Filling"], calories: 200, favorite: false },
        { name: "Omelette", ingredients: ["egg", "cheese", "onion"], calories: 250, favorite: false }
      ];
      saveRecipes();
    }

    renderRecipes();
  </script>
</body>
</html>
